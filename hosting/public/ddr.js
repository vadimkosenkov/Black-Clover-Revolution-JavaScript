!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var o=new function(){this.initGamePages=function(){this.imagesLogo=document.querySelector(".images-logo-of-game"),this.container=document.querySelector(".start-container"),this.startPageDiv=document.querySelector(".start-page"),this.playerNameInput=document.querySelector(".start-page input"),this.savePlayerNameBtn=document.querySelector(".start-page button"),this.gameContainer=document.querySelector(".game-container"),this.btn=document.querySelector(".btn"),this.headerGameBar=document.querySelector(".header-bar"),this.soundLoaderProgress=document.querySelector(".sound-loader-progress"),this.scores=document.querySelector(".scores"),this.containerMoveArrow=document.querySelector(".container-move-arrow"),this.containerStaticArrow=document.querySelector(".container-static-arrow"),this.scoresBoard=document.querySelector(".scores-board"),this.arrowViewArr=["assets/img/arrows/blue_png/leftBlue.png","assets/img/arrows/blue_png/bottomBlue.png","assets/img/arrows/blue_png/upBlue.png","assets/img/arrows/blue_png/rightBlue.png"]},this.initModalComponents=function(){this.modal=document.querySelector(".modal"),this.modalContent=document.querySelector(".modal__content"),this.modalContentSpan=document.querySelector(".modal-content-span"),this.modalOverlay=document.querySelector(".modal-overlay"),this.modalHeader=document.querySelector(".modal__header"),this.modalFooter=document.querySelector(".modal__footer"),this.modalFooterScores=document.querySelector(".modal__footer__scores"),this.modalFooterRules=document.querySelector(".modal__footer__rules"),this.modalFooterImg=document.querySelector("main.modal__content img")},this.modalChangeNameFunc=function(){this.modal.classList.add("display-none"),this.modalOverlay.classList.add("display-none"),this.gameContainer.classList.add("display-none"),this.containerMoveArrow.classList.add("display-none"),this.container.classList.add("menu-background"),this.modalFooter.classList.add("display-none"),this.modalFooterScores.classList.add("display-none"),this.container.classList.remove("display-none"),this.startPageDiv.classList.remove("display-none"),this.imagesLogo.classList.remove("display-none"),this.playerNameInput.value="",this.savePlayerNameBtn.setAttribute("disabled",""),this.savePlayerNameBtn.classList.add("disabled")},this.modalBackToMenuFunc=function(){this.modal.classList.add("display-none"),this.modalOverlay.classList.add("display-none"),this.gameContainer.classList.add("display-none"),this.containerMoveArrow.classList.add("display-none"),this.container.classList.add("menu-background"),this.modalFooter.classList.add("display-none"),this.modalFooterScores.classList.add("display-none"),this.container.classList.remove("display-none"),this.imagesLogo.classList.remove("display-none"),this.btn.classList.remove("display-none"),this.playerNameInput.value=""},this.modalPlayAgainFunc=function(){this.modal.classList.add("display-none"),this.modalOverlay.classList.add("display-none"),this.modalFooter.classList.add("display-none"),this.modalFooterScores.classList.add("display-none")},this.rulesTableCloseFunc=function(){this.modal.classList.add("display-none"),this.modalOverlay.classList.add("display-none"),this.modalFooter.classList.add("display-none"),this.modalFooterRules.classList.add("display-none"),this.modalFooterImg.classList.add("display-none")},this.nameValidate=function(e){e?(this.savePlayerNameBtn.removeAttribute("disabled"),this.savePlayerNameBtn.classList.remove("disabled"),this.playerNameInput.style.border="none"):(this.savePlayerNameBtn.setAttribute("disabled",""),this.savePlayerNameBtn.classList.add("disabled"),this.playerNameInput.style.border="3px solid red")},this.rulesTableFunc=function(){this.modal.classList.remove("display-none"),this.modalOverlay.classList.remove("display-none"),this.modalFooter.classList.remove("display-none"),this.modalFooterRules.classList.remove("display-none"),this.modalFooterImg.src="assets/img/arrow_keys.png",this.modalFooterImg.classList.remove("display-none"),this.modal.style.animation="1s linear modalMove",this.modalContent.style.animation="1s linear modalMoveText",this.modalHeader.innerHTML="Rules",this.modalContentSpan.style.display="flex",this.modalContentSpan.innerHTML="When the moving arrows hit the control point area, press the corresponding key"},this.topScoresTableFunc=function(e){this.modal.classList.remove("display-none"),this.modalOverlay.classList.remove("display-none"),this.modalFooter.classList.remove("display-none"),this.modalFooterRules.classList.remove("display-none"),this.modalFooterImg.src="assets/img/top_scores.png",this.modalFooterImg.classList.remove("display-none"),this.modal.style.animation="1s linear modalMove",this.modalContent.style.animation="1s linear modalMoveText",this.modalHeader.innerHTML="Top Scores",this.modalContentSpan.style.display="flex";var t="<table>";e.forEach((function(e){return t+="<tr><td> ".concat(e.name," </td><td></td><td> ").concat(e.scores," </td></tr>")})),t+="</table>",this.modalContentSpan.innerHTML=t},this.backToStartPageDiv=function(){this.btn.classList.add("display-none"),this.startPageDiv.classList.remove("display-none"),this.playerNameInput.value="",this.savePlayerNameBtn.setAttribute("disabled",""),this.savePlayerNameBtn.classList.add("disabled")},this.showMenuPage=function(){this.container.classList.add("menu-background"),this.btn.classList.remove("display-none"),this.startPageDiv.classList.add("display-none")},this.arrowDataAtribute=function(e){e.classList.add("arrow-static-push")},this.arrowScores=function(e,t,s,o){e.remove(),this.scores.innerText="Scores: ".concat(t),this.textScoresCreate(s,o)},this.textScoresCreate=function(e,t){this.scoresBoard.innerHTML="";var s=document.createElement("div");this.scoresBoard.appendChild(s),s.addEventListener("animationend",(function(){s.style.opacity="0"}),{once:!0}),s.innerText=e,s.style.position="relative",s.style.color=t,s.style.animation="0.5s linear animate"},this.textScoresRemove=function(e){e.remove()},this.missScoresValue=function(e){this.scores.innerText="Scores: ".concat(e)},this.removeArrowStaticClass=function(e){e.classList.remove("arrow-static-push")},this.startFunc=function(){this.btn.classList.add("display-none"),this.container.classList.add("display-none"),this.imagesLogo.classList.add("display-none"),this.gameContainer.classList.remove("display-none"),this.containerStaticArrow.classList.remove("display-none"),this.headerGameBar.classList.remove("display-none")},this.clearScore=function(){this.scores.innerText="Scores: 0",this.modalContentSpan.innerHTML="",this.scoresBoard.innerHTML=""},this.scoresTableFunc=function(e){this.modal.classList.remove("display-none"),this.modalOverlay.classList.remove("display-none"),this.modalFooter.classList.remove("display-none"),this.modalFooterScores.classList.remove("display-none"),this.modal.style.animation="1s linear modalMove",this.modalContentSpan.style.display="initial",this.modalContentSpan.style.animation="1s linear modalMoveText",this.modalHeader.innerHTML="Total Scores: ".concat(e)},this.showFinalResultScores=function(e){this.modalContentSpan.innerHTML+="<span style='color:".concat(e.color,"'>").concat(e.name,": ").concat(e.scores,"</span><br>")},this.startArrowMove=function(e,t,s){this.containerMoveArrow.appendChild(e),this.containerMoveArrow.classList.remove("display-none"),this.scoresBoard.classList.remove("display-none"),e.classList.add("arrow-move-style"),e.dataset.arrowTypeNumber=t,e.setAttribute("src",this.arrowViewArr[t]),e.style.left=s[t]+"px",e.style.top="-80px",e.style.animation="1.77s linear aniMove"},this.init=function(){this.initGamePages(),this.initModalComponents()}},n=new function(e){this.view=e,this.menuSound=null,this.gameSound=null,this.initFireBase=function(){this.db=firebase.firestore()},this.initGameComponents=function(){var e=this;this.gameSound.addEventListener("ended",(function(){return e.endGame()})),this.arrowUp=document.querySelector(".arrow-up"),this.arrowRight=document.querySelector(".arrow-right"),this.arrowLeft=document.querySelector(".arrow-left"),this.arrowBottom=document.querySelector(".arrow-bottom"),this.arrowStaticAll=document.querySelectorAll(".arrow-static-style"),this.containerMoveArrow=document.querySelector(".container-move-arrow"),this.scoresValue=0,this.progressBar=document.querySelector("progress"),this.setIntervalArrow=null,this.playerNameInput=document.querySelector(".start-page input")},this.initGameData=function(){this.tapSound=new Audio("assets/sound/tap.mp3"),this.hoverSound=new Audio("assets/sound/hover.mp3"),this.savePlayerNameSound=new Audio("assets/sound/start.mp3"),this.gameSound=new Audio("assets/sound/TOMORROW X TOGETHER Eien ni Hikare (Black Clover OP 12).mp3"),this.gameOver=new Audio("assets/sound/game-over.mp3"),this.gameSound.volume=.3,this.color=["rgb(16, 152, 85)","rgb(65, 129, 238)","rgb(247, 213, 29)","rgb(212, 114, 1)","rgb(214, 65, 53)"],this.scoresTable=[{name:"Amazing",color:this.color[0],scores:0,points:3},{name:"Perfect",color:this.color[1],scores:0,points:2},{name:"Very Good",color:this.color[2],scores:0,points:1},{name:"Ok",color:this.color[3],scores:0,points:0},{name:"Miss",color:this.color[4],scores:0,points:-1}]},this.playHoverSound=function(){this.hoverSound.play()},this.playTapSound=function(){this.tapSound.play()},this.modalChangeNameFunc=function(){this.view.modalChangeNameFunc()},this.modalBackToMenuFunc=function(){this.view.modalBackToMenuFunc(),this.menuSound=new Audio("assets/sound/menu.mp3"),this.menuSound.loop=!0,this.menuSound.volume=.2,this.menuSound.play()},this.modalPlayAgainFunc=function(){this.view.modalPlayAgainFunc(),this.clearScore(),this.startFunc()},this.rulesTableCloseFunc=function(){this.view.rulesTableCloseFunc()},this.nameValidate=function(e){e?this.view.nameValidate(!0):this.view.nameValidate(!1)},this.rulesTableFunc=function(){this.view.rulesTableFunc()},this.topScoresTableFunc=function(){var e=this,t=[];this.db.collection("RecordTable").orderBy("scores","desc").limit(10).get().then((function(s){s.forEach((function(s){t.push(s.data()),e.view.topScoresTableFunc(t)}))}))},this.backToStartPageDiv=function(){this.view.backToStartPageDiv(),this.menuSound.pause()},this.showMenuPage=function(){this.view.showMenuPage(),this.menuSound=new Audio("assets/sound/menu.mp3"),this.menuSound.loop=!0,this.menuSound.volume=.2,this.menuSound.play(),this.savePlayerNameSound.play()},this.arrowFunc=function(e){switch(e.key){case"ArrowLeft":this.arrowDataAtribute(0,this.arrowLeft);break;case"ArrowDown":this.arrowDataAtribute(1,this.arrowBottom);break;case"ArrowUp":this.arrowDataAtribute(2,this.arrowUp);break;case"ArrowRight":this.arrowDataAtribute(3,this.arrowRight)}},this.removeArrowStaticClass=function(){var e=this;this.arrowStaticAll.forEach((function(t){return e.view.removeArrowStaticClass(t)}))},this.arrowDataAtribute=function(e,t){var s=this;this.view.arrowDataAtribute(t),document.querySelectorAll('[data-arrow-type-number = "'.concat(e,'"]')).forEach((function(e){s.arrowScores(e,t.y)}))},this.arrowScores=function(e,t){var s=e.y,o=Math.abs(t-s);o<=20?(this.scoresValue+=3,this.view.arrowScores(e,this.scoresValue,"Amazing!",this.color[0]),this.scoresTable[0].scores++):o>=21&&o<=40?(this.scoresValue+=2,this.view.arrowScores(e,this.scoresValue,"Perfect",this.color[1]),this.scoresTable[1].scores++):o>=41&&o<=60?(this.scoresValue+=1,this.view.arrowScores(e,this.scoresValue,"Very Good",this.color[2]),this.scoresTable[2].scores++):o>=61&&o<=80&&(this.view.arrowScores(e,this.scoresValue,"Ok...",this.color[3]),this.scoresTable[3].scores++)},this.textScoresCreate=function(){this.view.textScoresCreate()},this.startFunc=function(){var e=this;this.view.startFunc(),this.clearScore(),this.menuSound.pause(),setTimeout((function(){e.gameSound.play(),e.progressBar.max=e.gameSound.duration}),1500),setTimeout((function(){return e.timeoutStartArrowMove()}),3e3)},this.timeoutStartArrowMove=function(){var e=this;this.setIntervalArrow=setInterval((function(){return e.startArrowMove()}),236)},this.clearScore=function(){this.view.clearScore(),this.scoresValue=0,this.scoresTable.forEach((function(e){return e.scores=0}))},this.endGame=function(){var e=this;clearInterval(this.setIntervalArrow),setTimeout((function(){return e.scoresTableFunc()}),1500)},this.scoresTableFunc=function(){var e=this;this.scoresTable.forEach((function(t){return e.view.showFinalResultScores(t)})),this.progressBar.value=0,this.gameOver.play(),this.scoresValue=this.scoresTable.reduce((function(e,t){return e+t.scores*t.points}),0),this.scoresValue<0&&(this.scoresValue=0),this.view.scoresTableFunc(this.scoresValue),this.db.collection("RecordTable").add({name:this.playerNameInput.value,scores:this.scoresValue})},this.startArrowMove=function(){var e=this,t=document.createElement("img"),s=[this.arrowLeft.x,this.arrowBottom.x,this.arrowUp.x,this.arrowRight.x],o=this.getRandomInt(4);this.view.startArrowMove(t,o,s),this.progressBar.value=0;requestAnimationFrame((function s(){e.progressBar.value=e.gameSound.currentTime,t.y+10>=window.innerHeight&&(e.view.textScoresCreate("Miss",e.color[4]),e.view.textScoresRemove(t),e.scoresTable[4].scores++,0!==e.scoresValue&&(e.scoresValue-=1,e.view.missScoresValue(e.scoresValue))),e.progressBar.value!==e.gameSound.duration&&requestAnimationFrame(s)}))},this.getRandomInt=function(e){return Math.floor(Math.random()*Math.floor(e))},this.init=function(){this.initFireBase(),this.initGameData(),this.initGameComponents()}}(o),a=new function(e){this.model=e,this.initModalButtons=function(){var e=this,t=document.querySelector(".modal__changeName"),s=document.querySelector(".modal__backToMenu"),o=document.querySelector(".modal__playAgain"),n=document.querySelector(".modal__rules__Ok");t.addEventListener("click",(function(){return e.model.modalChangeNameFunc()})),s.addEventListener("click",(function(){return e.model.modalBackToMenuFunc()})),o.addEventListener("click",(function(){return e.model.modalPlayAgainFunc()})),n.addEventListener("click",(function(){return e.model.rulesTableCloseFunc()}))},this.initMenuPage=function(){var e=this,t=document.querySelectorAll("button"),s=document.querySelector(".start"),o=document.querySelector(".rules"),n=document.querySelector(".top-scores"),a=document.querySelector(".exit"),i=document.querySelector(".start-page button");t.forEach((function(t){return t.addEventListener("mouseover",(function(){return e.model.playHoverSound()}))})),t.forEach((function(t){return t.addEventListener("click",(function(){return e.model.playTapSound()}))}));var r=document.querySelector(".start-page input");r.addEventListener("input",(function(){return e.model.nameValidate(r.value)})),s.addEventListener("click",(function(){return e.model.startFunc()})),o.addEventListener("click",(function(){return e.model.rulesTableFunc()})),n.addEventListener("click",(function(){return e.model.topScoresTableFunc()})),a.addEventListener("click",(function(){return e.model.backToStartPageDiv()})),i.addEventListener("click",(function(){return e.model.showMenuPage()}))},this.initKeyboardListeners=function(){var e=this;document.addEventListener("keydown",(function(t){return e.model.arrowFunc(t)})),document.addEventListener("keyup",(function(){return e.model.removeArrowStaticClass()}))},this.init=function(){this.initModalButtons(),this.initMenuPage(),this.initKeyboardListeners()}}(n);o.init(),a.init(),n.init()}]);